// const {
//   GoogleGenerativeAI,
//   HarmCategory,
//   HarmBlockThreshold,
// } = require("@google/generative-ai");


import { GoogleGenerativeAI } from "@google/generative-ai";


const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};


const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        { text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for A Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket, Pricing,ratings, Time to travel each of the location for 3 days with each day plan with best time to visit in JSON format." },
      ],
    },
    {
      role: "model",
      parts: [
        { text: "Okay, here's a budget-friendly 3-day Las Vegas travel plan for a couple, including hotel options and a detailed itinerary, all in JSON format.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40 - $80 per night\",\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/20/a6/a1/exterior.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1391,\n        \"longitude\": -115.1673\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Las Vegas hotel with a circus theme, offering affordable rooms and family-friendly entertainment. Has a Adventuredome Theme Park.\"\n    },\n     {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$50 - $90 per night\",\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/c3/74/b7/exterior.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0989,\n        \"longitude\": -115.1743\n      },\n      \"rating\": 4.0,\n      \"description\": \"A medieval-themed hotel on the Strip, offering budget-friendly rooms and a fun atmosphere. Has pools and a gaming area.\"\n    },\n    {\n        \"hotelName\": \"OYO Hotel and Casino Las Vegas\",\n        \"hotelAddress\": \"115 E Tropicana Ave, Las Vegas, NV 89109\",\n        \"price\": \"$35 - $75 per night\",\n        \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/5b/82/2b/oyo-hotel-and-casino-las.jpg?w=700&h=-1&s=1\",\n         \"geoCoordinates\": {\n            \"latitude\": 36.1019,\n            \"longitude\": -115.1718\n          },\n        \"rating\": 3.8,\n        \"description\":\"Located off the Strip, this hotel provides budget-conscious accommodation with easy access to attractions.\"\n    }\n\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip & Free Attractions\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"plan\": [\n         {\n            \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n            \"placeDetails\": \"Stunning seasonal floral displays, free to view.\",\n            \"placeImageUrl\": \"https://www.bellagio.com/content/dam/MGM/bellagio/conservatory/Conservatory-Image-3000x1688.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1128,\n              \"longitude\": -115.1743\n              },\n            \"ticket\": \"Free\",\n            \"pricing\": \"Free\",\n            \"ratings\": 4.7,\n            \"timeToTravel\": \"15 min\"\n          },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Iconic water show with music, free to watch from the street.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/fountains/bellagio-fountains-feature-1920x1080.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1128,\n              \"longitude\": -115.1743\n            },\n           \"ticket\": \"Free\",\n            \"pricing\": \"Free\",\n            \"ratings\": 4.8,\n            \"timeToTravel\":\"5 min\"\n        },\n        {\n          \"placeName\": \"The Venetian & Grand Canal Shoppes\",\n          \"placeDetails\": \"Walk through the canals, enjoy free street performers, view architecture, and visit the shopping centre.\",\n           \"placeImageUrl\": \"https://www.venetianlasvegas.com/content/dam/MGM/venetian/hotel/exterior/venetian-exterior-night-1920x1080.jpg\",\n            \"geoCoordinates\": {\n               \"latitude\": 36.1214,\n               \"longitude\": -115.1695\n            },\n          \"ticket\": \"Free (gondola ride is extra)\",\n          \"pricing\": \"Free (Gondola ride ~ $35/person)\",\n          \"ratings\": 4.6,\n          \"timeToTravel\":\"10 min\"\n        },\n         {\n          \"placeName\":\"Mirage Volcano\",\n          \"placeDetails\":\"See the Volcano erupt with fire and explosions.  This is a must-see in Las Vegas, and it's free!\",\n          \"placeImageUrl\": \"https://media.cntraveler.com/photos/5b9660f52d40a67a86f4d04a/16:9/w_2560%2Cc_limit/Volcano-Mirage-Las-Vegas-GettyImages-820240778.jpg\",\n          \"geoCoordinates\":{\n              \"latitude\": 36.1225,\n              \"longitude\": -115.1701\n           },\n           \"ticket\":\"Free\",\n            \"pricing\": \"Free\",\n            \"ratings\": 4.6,\n            \"timeToTravel\":\"15 min\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown & Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a canopy screen showing light shows and live music. \",\n          \"placeImageUrl\": \"https://media.cnn.com/api/v1/images/stellar/prod/170524173313-fremont-street-experience.jpg?c=original\",\n            \"geoCoordinates\": {\n             \"latitude\": 36.1697,\n              \"longitude\": -115.1400\n           },\n          \"ticket\": \"Free\",\n          \"pricing\": \"Free\",\n          \"ratings\": 4.5,\n          \"timeToTravel\":\"20 min from the Strip\"\n        },\n         {\n          \"placeName\":\"Container Park\",\n          \"placeDetails\": \"Unique shopping and entertainment venue built with shipping containers.\",\n          \"placeImageUrl\": \"https://www.vegasexperience.com/wp-content/uploads/2018/03/container-park-1.jpg\",\n          \"geoCoordinates\":{\n              \"latitude\": 36.1678,\n              \"longitude\":-115.1380\n          },\n          \"ticket\":\"Free\",\n           \"pricing\":\"Free (some attractions may cost extra)\",\n           \"ratings\": 4.4,\n          \"timeToTravel\":\"10 min\"\n        },\n         {\n          \"placeName\": \"Heart Attack Grill\",\n          \"placeDetails\": \"Famous for its extremely high-calorie burgers and playful theme.\",\n          \"placeImageUrl\": \"https://heartattackgrill.com/wp-content/uploads/2018/10/1280-h-heart-attack-grill-image-1.jpg\",\n             \"geoCoordinates\": {\n                \"latitude\": 36.1694,\n                \"longitude\": -115.1397\n             },\n          \"ticket\":\"Free to Enter\",\n          \"pricing\": \"Meals can range from $15 - $30 per person\",\n          \"ratings\": 4.0,\n          \"timeToTravel\":\"5 min\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"South Strip & Departure\",\n      \"bestTimeToVisit\": \"Morning & Afternoon\",\n      \"plan\": [\n         {\n          \"placeName\":\"M&M's World\",\n          \"placeDetails\":\"Multi-level shop with walls of colorful M&M's candies and merchandise.\",\n          \"placeImageUrl\":\"https://www.mmworld.com/media/20210917-102748-01-exterior.jpg\",\n          \"geoCoordinates\":{\n              \"latitude\":36.1098,\n              \"longitude\": -115.1704\n           },\n           \"ticket\":\"Free\",\n          \"pricing\":\"Free (purchases optional)\",\n          \"ratings\": 4.2,\n          \"timeToTravel\":\"10 min\"\n         },\n        {\n            \"placeName\":\"Welcome to Fabulous Las Vegas Sign\",\n            \"placeDetails\":\"Iconic photo opportunity at the famous sign.\",\n            \"placeImageUrl\":\"https://www.lasvegas.com/wp-content/uploads/2019/07/welcome-to-las-vegas-sign-1920x1080.jpg\",\n            \"geoCoordinates\":{\n                \"latitude\":36.0909,\n                \"longitude\":-115.1761\n            },\n            \"ticket\":\"Free\",\n            \"pricing\":\"Free\",\n            \"ratings\": 4.6,\n            \"timeToTravel\":\"15 min\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel (Optional)\",\n          \"placeDetails\": \"If budget allows, take a ride for great views of the city. Consider booking tickets in advance for discounts.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/clv/highroller/feature/HR_Feature_1920x1080.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1169,\n              \"longitude\": -115.1689\n           },\n          \"ticket\": \"Paid\",\n          \"pricing\": \"~$30-$35/person\",\n          \"ratings\": 4.5,\n          \"timeToTravel\":\"20 min\"\n        }\n      ]\n    }\n  }\n}\n```\n**Important Notes for Budget Travelers:**\n\n* **Transportation:** Utilize the Deuce bus or walk between locations on the Strip to save on taxi/rideshare costs.\n* **Food:** Look for happy hour deals, cheaper eateries, and consider bringing your own snacks/water.\n* **Free Activities:** Las Vegas has tons of free attractions that are fun and beautiful as part of the itinerary.\n* **Hotel:** Weekday rates are usually cheaper than weekends. Booking in advance can often get you a better deal.\n* **Flexibility:** This is just a suggestion. Feel free to modify it to suit your interests and time.\n* **Check for Deals:** Before you go, check for deals on attractions or food online.\n\nEnjoy your budget-friendly trip to Las Vegas! Let me know if you have any other questions.\n" },
      ],
    },
  ],
});

export default chatSession;